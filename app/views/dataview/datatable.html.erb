<html>
<body style="background: linear-gradient(to bottom, #ff9933 0%, #ffffff 100%);">
 <%= stylesheet_link_tag 'application' %>
  <%= javascript_include_tag  "application" %>
<%= form_tag( '/dataview', :method => :get,:id => 'dateform' ) do%>
<br>

<!--DATA TABLE -->
<div class="heading1">
Reports
<div class="toppane1">
 <b> ID <input type="text" id="controllerid" name="controllerid" style="width:90px" ></b>
 <b> From <input  type="text" id="fromdate" name="fromdate" style="width:80px"> </b>
<b>  To <input type="text" id="todate" name="todate" style="width:80px" ></b>
 <b> <button id="search" type="button" style="width:70px">Search</button> </b>
  <%end%>
</div>

</div>

<script>
 $(function(){
      $("#fromdate").datepicker({
         dateFormat: 'yy/mm/dd',
        
       onSelect: function(dateText) {
       
      }
   });
});
 

 $(function(){
      $("#todate").datepicker({
         dateFormat: 'yy/mm/dd',
         onSelect: function(dateText) {
         
       }
   });
});

$(
    function(){
     
        $('#search').click(function(){
                               
                   $("#dateform").submit();  
        });
        
    }
);

</script>
 <div class="datapane">
<table id="table_id" class="display nowrap" border="1" >
<thead>
<tr>
<th>controllerID </th>
<th>Updated Date </th>
<th>Updated Time </th>
<th>Uid </th>
<th>Generator RPM </th>
<th>Dc Bus Voltage </th>
<th>Voltage RPhase </th>
<th>Voltage YPhase </th>
<th>Voltage BPhase </th>
<th>VFD Frequency </th>
<th>VFD Current  </th>
<th>Current RPhase  </th>
<th>Current YPhase  </th>
<th>Current BPhase </th>
<th>Wind Speed </th>
<th>Turbine RPM </th>
<th>Current Kilowatt </th>
<th>Power Factor </th>
<th>Cur Frequency </th>
<th>kwh Import </th>
<th>kwh Export </th>
<th>kvah Import </th>
<th>kvah Export	</th>
<th>kvarh Import</th>
<th>kvarh Export</th>
<th>status</th>
<th>fault</th>
<th>RD WR index</th>
</tr>
</thead>
<% @periodic_data_tbl.each do |val| %>
<tr>
<td><%= "#{val['ctrlrid']}" %></td>
<td ><%= "#{val['updated_date']}" %></td>
<td><%= "#{val['updated_time'].strftime("%H:%M:%S")}" %></td>
<td> <%= "#{val['uid']}" %></td>
<td><%= "#{val['wtvalue1']}" %></td>
<td><%= "#{val['wtvalue2']}" %></td>
<td><%= "#{val['wtvalue3']}" %></td>
<td><%= "#{val['wtvalue4']}" %></td>
<td><%= "#{val['wtvalue5']}" %></td>
<td><%= "#{val['wtvalue6']}" %></td>
<td><%= "#{val['wtvalue7']}" %></td>
<td><%= "#{val['wtvalue8']}" %></td>
<td><%= "#{val['wtvalue9']}" %></td>
<td><%= "#{val['wtvalue10']}" %></td>
<td><%= "#{val['wtvalue11']}" %></td>
<td><%= "#{val['wtvalue12']}" %></td>
<td><%= "#{val['wtvalue13']}" %></td>
<td><%= "#{val['wtvalue14']}" %></td>
<td><%= "#{val['wtvalue15']}" %></td>
<td><%= "#{val['wtvalue16']}" %></td>
<td><%= "#{val['wtvalue17']}" %></td>
<td><%= "#{val['wtvalue18']}" %></td>
<td><%= "#{val['wtvalue19']}" %></td>
<td><%= "#{val['wtvalue20']}" %></td>
<td><%= "#{val['wtvalue21']}" %></td>
<td><%= "#{val['status1']}" %></td>
<td><%= "#{val['fault']}" %></td>
<td><%= "#{val['RD_WR_index']}" %></td>
</tr>
<% end %>
</table>
</div>

<script type="text/javascript">
  
        $('#table_id').DataTable(
{
        "scrollX": true,
	"scrollY": true,
dom: 'Bfrtip',
        buttons: [
		{
                extend: 'copyHtml5',
               messageTop: 'From Date: '+$('#fromdate').val()+"\n"+' To Date: '+$('#todate').val()+"\n",
                 title: 'APEX COMTEL - Wind Monitoring System',
		filename: $('#fromdate').val()+"-"+$('#todate').val()+"APEX COMTEL - Wind System"
                },
		{
                extend: 'csvHtml5',
                messageTop: 'From Date: '+$('#fromdate').val()+"\n"+' To Date: '+$('#todate').val()+"\n",
                title: 'APEX COMTEL - Wind Monitoring System',
		filename: $('#fromdate').val()+"-"+$('#todate').val()+"APEX COMTEL - Wind System"
                },
                {
                extend: 'excelHtml5',
                messageTop: 'From Date: '+$('#fromdate').val()+"  "+' To Date: '+$('#todate').val()+"\n",
                title: 'APEX COMTEL - Wind Monitoring System',
		filename: $('#fromdate').val()+"-"+$('#todate').val()+"APEX COMTEL - Wind System"			
                },
                {
                 extend: 'pdfHtml5',
		 messageTop: 'From Date: '+$('#fromdate').val()+"\n"+' To Date: '+$('#todate').val()+"\n",
                 title: 'APEX COMTEL - Wind Monitoring System',
		 filename: $('#fromdate').val()+"-"+$('#todate').val()+"APEX COMTEL - Wind System",
		 customize: function(doc) {
    			doc.styles.title = {
      			color: 'blue',
      			fontSize: '14',
     			alignment: 'center'
    		}   
  	      } 
                 
            },
	    {
                extend: 'print',
		orientation: 'landscape',
		//fontSize: '20',
		messageTop: 'From Date: '+$('#fromdate').val()+"\n"+' To Date: '+$('#todate').val()+"\n",
                title: 'APEX COMTEL - Wind Monitoring System',
		filename: $('#fromdate').val()+"-"+$('#todate').val()+"APEX COMTEL - Wind System",
		 
		 
  
	    }
        ]
}
    
);
  
</script>
<!-- GRAPH -->

</body>
</html>
